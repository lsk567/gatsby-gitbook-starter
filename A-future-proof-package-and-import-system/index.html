<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="https://graphql-engine-cdn.hasura.io/img/hasura_icon_black.svg"/><noscript></noscript><meta name="generator" content="Gatsby 3.4.1"/><link rel="sitemap" type="application/xml" href="/lf-wiki-gitbook/sitemap/sitemap-index.xml"/><title data-react-helmet="true"></title><link data-react-helmet="true" rel="canonical" href="https://shaokai.io/lf-wiki-gitbook/A-future-proof-package-and-import-system"/><link as="script" rel="preload" href="/lf-wiki-gitbook/webpack-runtime-c3d61c4484cdb79c688f.js"/><link as="script" rel="preload" href="/lf-wiki-gitbook/framework-bb601ffbbd122d5c0b0b.js"/><link as="script" rel="preload" href="/lf-wiki-gitbook/app-1e29a839ef62b468a227.js"/><link as="fetch" rel="preload" href="/lf-wiki-gitbook/page-data/A-future-proof-package-and-import-system/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/lf-wiki-gitbook/page-data/sq/d/2619113677.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/lf-wiki-gitbook/page-data/sq/d/3706406642.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/lf-wiki-gitbook/page-data/sq/d/417421954.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/lf-wiki-gitbook/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><style data-emotion="css-global 1avl5zq">@import url('https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap');@import url('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600&display=swap');*{margin:0;padding:0;box-sizing:border-box;font-display:swap;}::-webkit-input-placeholder{color:#c2c2c2;}:-ms-input-placeholder{color:#c2c2c2;}::-webkit-input-placeholder{color:#c2c2c2;}::-moz-placeholder{color:#c2c2c2;}:-ms-input-placeholder{color:#c2c2c2;}::placeholder{color:#c2c2c2;}html,body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Roboto Light','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-size:16px;scroll-behavior:smooth;}a{-webkit-transition:color 0.15s;transition:color 0.15s;}body{font-family:'Roboto';}.visibleMobile{display:none;}.visibleMobileView{display:none!important;}.video-responsive{position:relative;padding-bottom:56.2%;}a{-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:none;text-decoration:none;}.displayInline{display:inline-block;}.navBarToggle{border:0px solid #fff;border-radius:4px;width:36px;height:33px;position:absolute;right:20px;padding:8px 5px;display:none;}.navBarToggle .iconBar{display:block;width:22px;height:2px;border-radius:1px;margin:0 auto;margin-top:4px;background-color:#001934;}.navBarToggle .iconBar:first-child{margin-top:0px;}.video-responsive iframe{position:absolute;width:100%;height:100%;}.diffNewLine{color:#22863a;background-color:#f0fff4;}.diffRemoveLine{color:red;background-color:#ffcccc;}.navBarParent{width:100%;float:left;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.divider{height:30px;margin:0 15px;border-right:1px solid rgba(255, 255, 255, 0.3);}.githubIcon{width:15px;margin-right:5px;}.githubSection{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#000;opacity:0.7;}.githubSection:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important;}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#001933;}.headerWrapper{border-bottom:1px solid rgb(212, 218, 223);box-shadow:rgba(116, 129, 141, 0.1) 0px 1px 1px 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.formElement{background-color:transparent;padding:4px;border-radius:5px;position:relative;}.formElement:focus{outline:none;border:none;}.formElement svg path{fill:#2fd2c5;}.searchInput{width:100%;background-color:rgba(28,211,198,.12)!important;border-width:0!important;color:#C2C2C2;padding:10px;border-radius:5px;color:#fff;opacity:.6;padding-left:38px;max-width:600px;}.searchInput:focus,.searchInput:visited,.searchInput:hover,.searchInput:focus-within{outline:none;border:0;}.searchWrapper{padding-left:0px;padding-right:20px;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;}.searchWrapper a{font-weight:500;}.hitWrapper{background-color:#fff;padding:0.7em 1em 0.4em;border-radius:4px;position:absolute;width:80vw;max-width:30em;top:40px;border:1px solid #ccc;box-shadow:0 1px 4px 0 rgba(0, 0, 0, 0.16);height:auto;max-height:80vh;overflow:scroll;left:0;}.hitWrapper ul li{margin-top:0.7em;padding-top:0.7em;border-top:1px solid;list-style-type:none;}.hitWrapper ul li:first-child{border-top:0px;margin-top:0px;color:black!important;padding:0px;}.showResults{display:block;}.hideResults{display:none;}.hitWrapper span{color:black;font-size:14px;}.headerTitle{height:auto;font-size:16px;line-height:1.5;font-weight:300;color:#fff!important;margin-top:16px;text-transform:uppercase;}.headerTitle a{color:#fff;}.headerTitle a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.logoWrapper{padding:21px 0;padding-left:20px;}.logoContent{font-family:'Roboto';margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px;}.removePadd{padding:0!important;}.navBarDefault{background-color:#001934;border-radius:0;border-top:0;margin-bottom:0;border:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);-moz-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.8);-o-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);z-index:1;padding:15px;position:relative;height:80px;}.navBarHeader{min-width:335px;padding-right:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand{padding:0px 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand img{width:120px;margin-right:6px;display:inline-block;}.navBarUL li{list-style-type:none;}.navBarUL{-webkit-overflow-scrolling:touch;}.navBarUL li a{font-family:'Roboto';color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1;padding:10px 15px;}.navBarNav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarUL li a img,.navBarUL li a .shareIcon{width:20px;}.navBarUL li a:hover{opacity:0.7;}pre{border:0!important;background-color:rgb(245, 247, 249);}blockquote{color:rgb(116, 129, 141);margin:0px 0px 24px;padding:0px 0px 0px 12px;border-left:4px solid rgb(230, 236, 241);border-color:rgb(230, 236, 241);}.socialWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.socialWrapper li{display:inline-block;}.socialWrapper li a{display:contents;}.discordBtn,.twitterBtn{border-radius:4px;border:solid 1px #d1d2d3;background-color:#f1f5f8;width:20px;height:20px;padding-top:2px;margin-left:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;opacity:.8;cursor:pointer;}.twitterBtn img{width:12px!important;}.discordBtn img{width:10px!important;}.discordBtn:hover,.twitterBtn:hover{opacity:1;}.discordBtn img{width:10px;}.sidebarTitle{background-color:#f8f8f8;padding:18px 16px;font-family:'Poppins';font-size:18px;font-weight:600;color:#001934;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.sideBarShow{display:none;}.sidebarTitle a{color:#001934;}.greenCircle{width:8px;height:8px;background-color:#1cd3c6;border-radius:50%;margin:0 12px;}.headerNav{font-family:'Roboto';padding:0px 24px;color:#001933;font-size:16px;font-weight:500;line-height:1em;}.headerNav a{color:#001933;-webkit-text-decoration:none;text-decoration:none;}.headerNav a:hover{-webkit-text-decoration:none;text-decoration:none;}.logoWrapper img{width:40px;}.sideBarUL{margin-top:32px;}.sideBarUL li{list-style-type:none;width:auto;}.sideBarUL li a{font-size:14px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;padding-left:10px;padding-right:25px;border-style:solid none solid solid;border-width:1px 0px 1px 1px;border-color:transparent currentcolor transparent transparent;}.hideFrontLine .collapser{background:transparent;border:none;outline:none;position:absolute;right:20px;z-index:1;cursor:pointer;}.hideFrontLine .active>a{background-color:#1ed3c6;color:#fff!important;}.firstLevel ul li .collapser svg path{fill:#fff!important;}.active .collapser>svg>path{fill:#001933!important;}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1;}.sideBarUL .item{list-style:none;padding:0;}.sideBarUL .item>a{color:#1ED3C6;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;width:100%;padding-right:35px;padding-left:15px;}.showFrontLine .item>a:hover{background-color:#001933;}.showFrontLine .active>a{background-color:#001933;}.sideBarUL .item .item{margin-left:16px;}.firstLevel>ul>.item{margin-left:0!important;}.showFrontLine .item .item{border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);padding:0;width:calc(100% - 16px)!important;}.showFrontLine .item .active>a{border-color:rgb(230, 236, 241)!important;border-style:solid none solid solid;border-width:1px 0px 1px 1px;background-color:#1ed3c6!important;color:#fff;}.titleWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:40px;border-bottom:1px solid rgb(230, 236, 241);margin-bottom:32px;}.gitBtn{height:30px;min-height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.gitBtn img{width:15px;display:inline-block;margin-right:5px;}.addPaddTopBottom{padding:50px 0;}.preRightWrapper{display:block;margin:0px;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;padding:16px;text-align:right;}.smallContent{display:block;margin:0px;padding:0px;color:#6e6e6e;}.smallContent span{font-size:12px;line-height:1.625;font-weight:400;}.nextRightWrapper{display:block;margin:0px;padding:16px;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}table{padding:0;}table tr{border-top:1px solid #cccccc;margin:0;padding:0;}table tr:nth-child(2n){background-color:#f8f8f8;}table tr th{font-weight:bold;border:1px solid #cccccc;text-align:left;margin:0;padding:6px 13px;}table tr td{border:1px solid #cccccc;text-align:left;margin:0;padding:6px 13px;}table tr th :first-child,table tr td :first-child{margin-top:0;}table tr th :last-child,table tr td :last-child{margin-bottom:0;}img{max-width:100%;}.githubBtn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;padding:10px 0px;padding-left:15px;max-height:40px;}.githubBtn span span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.communitySection{font-size:24px;font-weight:700;}.authorSection{padding:20px 0;}.authorSection,.authorName{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.authorImg img{width:75px;height:75px;border-radius:50%;min-width:75px;max-width:75px;min-height:75px;max-height:75px;}.authorDetails{padding-left:10px;}.authorDesc{padding-top:5px;font-size:14px;}.authorName img{margin-left:10px;display:inline-block;width:20px;}.authorName img:hover{opacity:0.7;}.heading1{font-size:26px;font-weight:800;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading2{font-size:24px;font-weight:700;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading3{font-size:20px;font-weight:600;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading4{font-size:18px;font-weight:500;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading5{font-size:16px;font-weight:400;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading6{font-size:14px;font-weight:300;line-height:1.5;margin-bottom:16px;margin-top:32px;}.paragraph{margin:16px 0px 32px;line-height:1.625;}.pre{font-size:14px;margin:0px;padding:16px;overflow:auto;}.poweredBy{font-size:0.6em;text-align:end;padding:0;}.topnav{-webkit-transition:top 0.5s,bottom 0.5s;}@media (max-width: 767px){.formElement svg path{fill:#001934;}.visibleMobileView{display:block!important;}.searchInput{color:#001934;}.socialWrapper{position:absolute;right:10px;top:29px;}.responsive{margin-top:15px;position:relative;padding-bottom:20px;border-top:1px solid #fff;}.headerTitle{padding-right:50px;font-size:16px;}.navBarBrand{min-height:40px;}.navBarBrand img{margin-right:8px;}.topnav.responsive .visibleMobile{display:block;}.topnav .navBarUL{display:none;}.topnav.responsive .navBarUL{display:block;text-align:left;}.hiddenMobile{display:none!important;}hr{margin-top:0;margin-bottom:0;}.navBarParent{display:block;}.separator{margin-top:20px;margin-bottom:20px;}.navBarULRight{position:static;}.navBarUL{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:7.5px 0px;}.navBarUL li{height:37px;}.navBarUL li a{font-size:14px;padding:10px 15px;}.navBarDefault{display:block;height:auto;}.navBarToggle{margin-right:0;display:block;position:absolute;left:11px;top:15px;background:#fff;}.navBarHeader{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:auto;padding-right:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand{font-size:20px;padding:0 0;padding-left:0;-webkit-flex:initial;-ms-flex:initial;flex:initial;padding-right:15px;}.titleWrapper{padding:0 15px;display:block;}.gitBtn{display:inline-block;}.mobileView{text-align:left!important;padding-left:0!important;}.searchWrapper{padding:0px 0;padding-top:0px;position:absolute;bottom:0px;width:calc(100% - 70px);position:absolute;left:40px;top:8px;}.hitWrapper{width:100%;right:0;top:35px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static;}}@media (min-width: 768px) and (max-width: 991px){.navBarDefault{padding:10px;}.navBarBrand{font-size:22px;}.navBarHeader{min-width:240px;-webkit-flex:initial;-ms-flex:initial;flex:initial;}.githubBtn{padding:10px 10px;}.divider{margin:0 5px;height:20px;}.hitWrapper{max-width:500px;}.navBarUL li a{padding:10px 5px;}.searchWrapper{padding-left:0px;}}</style><div class="navBarWrapper"><nav class="navBarDefault"><div class="navBarHeader"><a href="https://hasura.io/learn/" class="navBarBrand"><img class="img-responsive displayInline" src="https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/brand.svg" alt="logo"/></a><div class="headerTitle displayInline"><a href='https://hasura.io/learn/'><img class='img-responsive' src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/learn-logo.svg' alt='Learn logo' /></a></div></div><ul class="socialWrapper visibleMobileView"><li>
		    <a href="https://twitter.com/hasurahq" target="_blank" rel="noopener">
		      <div class="twitterBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/twitter-brands-block.svg' alt={'Twitter'}/>
		      </div>
		    </a>
		  </li>
			<li>
		    <a href="https://discordapp.com/invite/hasura" target="_blank" rel="noopener">
		      <div class="discordBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/discord-brands-block.svg' alt={'Discord'}/>
		      </div>
		    </a>
		  </li></ul><div id="navbar" class="topnav"><div class="visibleMobile"><style data-emotion="css z7d7m6">.css-z7d7m6{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);}@media only screen and (max-width: 1023px){.css-z7d7m6{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-z7d7m6{padding-left:0;}}@media only screen and (max-width: 767px){.css-z7d7m6{padding-left:0px;height:auto;}}</style><aside class="css-z7d7m6 e1sbq3r11"><div class="sidebarTitle hiddenMobile"><a href='https://hasura.io/learn/'>graphql </a><div class='greenCircle'></div><a href='https://hasura.io/learn/graphql/react/introduction/'>react</a></div><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/lf-wiki-gitbook/introduction">Introduction</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-TypeScript">Writing Reactors In Type Script</a></li><li class=" item "><a href="/lf-wiki-gitbook/Benchmarks">Benchmarks</a></li><li class=" item "><a aria-current="page" class="" href="/lf-wiki-gitbook/A-future-proof-package-and-import-system">A Future Proof Package And Import System</a></li><li class=" item "><a href="/lf-wiki-gitbook/Clone-the-Repository">Clone The Repository</a></li><li class=" item "><a href="/lf-wiki-gitbook/Containerized-Execution">Containerized Execution</a></li><li class=" item "><a href="/lf-wiki-gitbook/Contributing">Contributing</a></li><li class=" item "><a href="/lf-wiki-gitbook/Creating-and-Managing-Submodules">Creating And Managing Submodules</a></li><li class=" item "><a href="/lf-wiki-gitbook/Developer-IntelliJ-Setup-(for-Kotlin)">Developer Intelli J Setup For Kotlin</a></li><li class=" item "><a href="/lf-wiki-gitbook/Diagrams">Diagrams</a></li><li class=" item "><a href="/lf-wiki-gitbook/Distributed-Execution">Distributed Execution</a></li><li class=" item "><a href="/lf-wiki-gitbook/Generic-Types,-Interfaces,-and-Inheritance">Generic Types Interfaces And Inheritance</a></li><li class=" item "><a href="/lf-wiki-gitbook/Downloading-and-Building">Downloading And Building</a></li><li class=" item "><a href="/lf-wiki-gitbook/Home">Home</a></li><li class=" item "><a href="/lf-wiki-gitbook/Import-System">Import System</a></li><li class=" item "><a href="/lf-wiki-gitbook/Legacy-Eclipse-Instructions">Legacy Eclipse Instructions</a></li><li class=" item "><a href="/lf-wiki-gitbook/Maven-Notes">Maven Notes</a></li><li class=" item "><a href="/lf-wiki-gitbook/Modal-Models-RFC">Modal Models RFC</a></li><li class=" item "><a href="/lf-wiki-gitbook/Multiports-and-Banks-of-Reactors">Multiports And Banks Of Reactors</a></li><li class=" item "><a href="/lf-wiki-gitbook/Overview">Overview</a></li><li class=" item "><a href="/lf-wiki-gitbook/Protobufs">Protobufs</a></li><li class=" item "><a href="/lf-wiki-gitbook/Publications-and-Presentations">Publications And Presentations</a></li><li class=" item "><a href="/lf-wiki-gitbook/Regression-Tests">Regression Tests</a></li><li class=" item "><a href="/lf-wiki-gitbook/Related-Work">Related Work</a></li><li class=" item "><a href="/lf-wiki-gitbook/Results-of-Experiments-for-Rhythm">Results Of Experiments For Rhythm</a></li><li class=" item "><a href="/lf-wiki-gitbook/Running-Benchmarks">Running Benchmarks</a></li><li class=" item "><a href="/lf-wiki-gitbook/Running-Lingua-Franca-IDE-(Epoch)-with-Kotlin-based-Code-Generators-Enabled-(without-Eclipse-Environment)">Running Lingua Franca IDE Epoch With Kotlin Based Code Generators Enabled Without Eclipse Environment</a></li><li class=" item "><a href="/lf-wiki-gitbook/Support-Matrix">Support Matrix</a></li><li class=" item "><a href="/lf-wiki-gitbook/Tardiness">Tardiness</a></li><li class=" item "><a href="/lf-wiki-gitbook/Target-Specification">Target Specification</a></li><li class=" item "><a href="/lf-wiki-gitbook/Termination">Termination</a></li><li class=" item "><a href="/lf-wiki-gitbook/Timing-Analysis">Timing Analysis</a></li><li class=" item "><a href="/lf-wiki-gitbook/Tools">Tools</a></li><li class=" item "><a href="/lf-wiki-gitbook/Troubleshooting">Troubleshooting</a></li><li class=" item "><a href="/lf-wiki-gitbook/Using-Maven">Using Maven</a></li><li class=" item "><a href="/lf-wiki-gitbook/Web-Based-Editor">Web Based Editor</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-Cpp">Writing Reactors In Cpp</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-Python">Writing Reactors In Python</a></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1sbq3r10"><hr/></li><style data-emotion="css k0rhaf">.css-k0rhaf{list-style:none;}.css-k0rhaf a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-k0rhaf a:hover{color:#1ed3c6!important;}.css-k0rhaf a svg{float:right;margin-right:1rem;}</style><li class="css-k0rhaf e1sbq3r12"><a href="https://hasura.io" to="https://hasura.io" target="_blank" rel="noopener noreferrer">Hasura<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside><hr/></div><ul class="navBarUL navBarNav navBarULRight"><li class="divider hiddenMobile"></li><li class="hiddenMobile"><ul class="socialWrapper"><li>
		    <a href="https://twitter.com/hasurahq" target="_blank" rel="noopener">
		      <div class="twitterBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/twitter-brands-block.svg' alt={'Twitter'}/>
		      </div>
		    </a>
		  </li>
			<li>
		    <a href="https://discordapp.com/invite/hasura" target="_blank" rel="noopener">
		      <div class="discordBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/discord-brands-block.svg' alt={'Discord'}/>
		      </div>
		    </a>
		  </li></ul></li><li class="githubBtn"><span><a href="https://github.com/hasura/gatsby-gitbook-boilerplate" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li><li><style data-emotion="css 10hr3p7">.css-10hr3p7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;width:100%;padding:0 20px 0 25px;}.css-10hr3p7 .switch{position:relative;display:inline-block;width:50px;height:20px;}.css-10hr3p7 .switch input{opacity:0;width:0;height:0;}.css-10hr3p7 .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;}.css-10hr3p7 .slider:before{position:absolute;content:'';height:30px;width:30px;left:0px;bottom:4px;top:0;bottom:0;margin:auto 0;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;box-shadow:0 0px 15px #2020203d;background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOfSURBVEiJlZVLaFxVGMd/333NJG2a+ujUJnGSSWljGvPoQ0tBbIooulDoQgSpEou4UOqiLlzpxoVFEIsgaotaaEhBEXVV8EUXgrao0SYxk6ROjCUxfaQvm8fMPfd+LqZJ5k4ySfxW93yP/+Ocw7mwTOhw21odbG8rzuf6N3fl+iqNDm5rXGreKlXwB1oe8vtr0yanF4JY1YeR2lDzbgnHn5JwxvYJjuhwR7wUjixUXBc3Wfsk/lg7sUYkvmXC1vB+qe3K5IZa90s2cxTNWQASa4B4C0AAfO8kOx8pxnMi4OdaEmbmcg9mIoF7NxLfAiIvSLIrAyChjswpsysg3jy7tEEuLeZgbotUsQL/SjdmIoF4SPl2QM7YNce/mO1xG85+p27dy3lp1XMbIPCrfbGsY0kCM7DxWzWXqgCINQIugh4TQSMuYRRAxSnM/Ss7jvglCfy+1gfwx/bMuhWv/lbR/rp4wLZw88qzPYIcBDIscpazkZdhXf2YMLy1DwnIq1Muxv5eMLCp5zPta6qQTb03oRdVDkO7XYpAdLhtrZkcuoKavIp4MxK7ByDrJDtLXr+VhmWy/oE5cECkfPYzpiNP37ZSIE23pLSvyVtAIGR3RTLizn0ay25ZEXjm3vVGL/wWxCrfU22PXH1LMVXR7lzhYu+y4H+1bjWTf45jV6/Bq38+OF/zTYTAEnUjAzozb0bp0H+eW7cUgdT93o274QxeDQChhK9GCELcy5GJILKsDHxzaFkX4qUJp99F5agrzrWIgFy68SPxM/vnMw6y5glg/uYJctBOHn9nOaLCyJ1/ZqeE4WrLldgHUTkGzY1EU+jb/si+t4oPsFSYkX3PWqqnLJGdAmD+SNzU4PqquQ6rDKl4LOIi70T7FN6wA/crSR2bKaypPmmbUfdBCezXEN0DqC1hgwAEg42Hwmwmcjji1UPZ9lIipxB+Ah1FLR90A3AfcGdBz5dOsnOv5Nmxgv7ENQ2uV0RgynYgXmolu1Ic03YQbJPUiXT+xyGEtnPXw1heGG37Bc2e+9/oAq9I6kQaCp5r2Xz2tHqpA4hb8DwrzHSjUz9COL0icEXftJOd7xeQRcMMNT1ObuxzDafcaMVGvFrw6sC6HWTB6DTwkpPs/KTIzSIqhrauM8GNTzHjuwsfwvkpB6w1IHEQVGV1r+vc8aJsPPXDgtaSXgEd2FXtc/V1gslHLabWa5jzEAXsACm/IVbZz8iqw05Dz8lSGP8BjRZeDZkbZsEAAAAASUVORK5CYII=);background-repeat:no-repeat;-webkit-background-position:center;background-position:center;}.css-10hr3p7 input:checked+.slider{background:linear-gradient(to right, #fefb72, #f0bb31);}.css-10hr3p7 input:checked+.slider:before{-webkit-transform:translateX(24px);-ms-transform:translateX(24px);-webkit-transform:translateX(24px);-moz-transform:translateX(24px);-ms-transform:translateX(24px);transform:translateX(24px);background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANGSURBVEiJndVPbNRVEAfwz9vd/q8tBQtoxSYYDKYmejMGD3DxYloMiRoT22IEDQcPno3xoFclMf6JHrDFyIVEI3g2eiDoRWOMfygqNrSkoeAWCtIu230e3m+77e6KCZO8vH3zZuY7M+/7mxVjVFu7C+vPt7mmh4fi+eEDMUYFVZkdeZU7dhgIzxOj25ULe3fJx6PYamZkDYD4rRDmmgafDIdE3aIJbcrKxkQF4/GtBtuY/43KGVBxOsT/S3YijAomEVBCBe0geNlYfLfBZ3bfJmFlp7u/ONUcYCIMCw6jL1vhFikUURS9Zn88Vn9ZaOJA8DTuA3n0Zjm3ZlDL2VrASpZE8CwaABormAgPC75Cny7cmYE0kwou4Rq4IWeP0fhdc4DjIe+GD0QvIKcbmzOrtl56t9O2gRBYvsKVcyz9ne7nsQgiPhUdtD8uNVYwGRbQK497qu3ZzsYHUuB1EimepTiVKplBGZQM6rI7liFX5/Ur0rPmpYw3ZcEL7fRso3eQQgcCfffT0Z+i9K3GOFMNvh7gWOjDYGpJpuvbkQK1dND/IF1b6Oynf4jW7jU2a3zY6uPQ3whw0/u4S5DYIqsAOjdrkKqutSfbVcncL+ejOoAQsC39VGN9yOiTa8LmXIGOx8h11RxqzzTgeHLOAGKUM4pFFdzMzJYX0n79YiPAP/O0PUSlHTE9cCXdCJ7zVFxZA4DReA4/gKVMd/WvtJcWKf6e6FlapPgHS0UW3uPyN9b58IuxOFU91Ne+E+kL7cb1Oa5O0zPI0kJaa+XaLIszif21q4x2if+1ClLP/iRrUfYNufQTF79P2ceY2lFaZP5HLqaCFaUxmOSsT3RWD42j4mh4RnQEnTZYP+pCLh1Se2uZF0FZdNC0o16Plf8GgMnwOZ5Eot9GiefVmbQiDbtitif52njcUx+q+TSNTgoZQAlzddblJj7ByWah0htc2LvL7L5Nq9r98YhBLSo2481Vfbkh+DtytljWaiy+3QwgxOnhIfl4AmdoGTXw2eUGq8lwWNCDD1WUBC+hYNyLTf9iZ554RAiPG/jyjYKcR7E1wa3sxKkGh/H4Sp3mULNsVyVvTgxTqYIYmRk5oOK0e0/8fEvH25B/AZyRWA6LDlu9AAAAAElFTkSuQmCC);background-repeat:no-repeat;-webkit-background-position:center;background-position:center;}.css-10hr3p7 .slider.round{border-radius:34px;}.css-10hr3p7 .slider.round:before{border-radius:50%;}</style><div class="css-10hr3p7 e1c69wq20"><label id="switch" class="switch"><input type="checkbox" id="slider" checked=""/><span class="slider round"></span></label></div></li></ul></div></nav><style data-emotion="css 1cph384">.css-1cph384{height:60px;box-shadow:0 3px 6px 0 rgba(0, 0, 0, 0.16);background-color:#f8f8f8;position:relative;display:none;}@media (max-width: 767px){.css-1cph384{display:block;}}</style><div class="css-1cph384 e1217p0e0"><div class="navBarDefault removePadd"><span class="navBarToggle" role="button" tabindex="0"><span class="iconBar"></span><span class="iconBar"></span><span class="iconBar"></span></span></div></div></div><style data-emotion="css o8zoz4">.css-o8zoz4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background:#fff;}.css-o8zoz4 .sideBarUL li a{color:#3B454E;}.css-o8zoz4 .sideBarUL .item>a:hover{background-color:#1ed3c6;color:#fff!important;}@media only screen and (max-width: 767px){.css-o8zoz4{display:block;}}</style><div class="css-o8zoz4 e1eqkayb4"><style data-emotion="css kmc1lc">.css-kmc1lc{width:298px;}</style><div class="hiddenMobile css-kmc1lc e1eqkayb1"><style data-emotion="css z7d7m6">.css-z7d7m6{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);}@media only screen and (max-width: 1023px){.css-z7d7m6{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-z7d7m6{padding-left:0;}}@media only screen and (max-width: 767px){.css-z7d7m6{padding-left:0px;height:auto;}}</style><aside class="css-z7d7m6 e1sbq3r11"><div class="sidebarTitle hiddenMobile"><a href='https://hasura.io/learn/'>graphql </a><div class='greenCircle'></div><a href='https://hasura.io/learn/graphql/react/introduction/'>react</a></div><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/lf-wiki-gitbook/introduction">Introduction</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-TypeScript">Writing Reactors In Type Script</a></li><li class=" item "><a href="/lf-wiki-gitbook/Benchmarks">Benchmarks</a></li><li class=" item "><a aria-current="page" class="" href="/lf-wiki-gitbook/A-future-proof-package-and-import-system">A Future Proof Package And Import System</a></li><li class=" item "><a href="/lf-wiki-gitbook/Clone-the-Repository">Clone The Repository</a></li><li class=" item "><a href="/lf-wiki-gitbook/Containerized-Execution">Containerized Execution</a></li><li class=" item "><a href="/lf-wiki-gitbook/Contributing">Contributing</a></li><li class=" item "><a href="/lf-wiki-gitbook/Creating-and-Managing-Submodules">Creating And Managing Submodules</a></li><li class=" item "><a href="/lf-wiki-gitbook/Developer-IntelliJ-Setup-(for-Kotlin)">Developer Intelli J Setup For Kotlin</a></li><li class=" item "><a href="/lf-wiki-gitbook/Diagrams">Diagrams</a></li><li class=" item "><a href="/lf-wiki-gitbook/Distributed-Execution">Distributed Execution</a></li><li class=" item "><a href="/lf-wiki-gitbook/Generic-Types,-Interfaces,-and-Inheritance">Generic Types Interfaces And Inheritance</a></li><li class=" item "><a href="/lf-wiki-gitbook/Downloading-and-Building">Downloading And Building</a></li><li class=" item "><a href="/lf-wiki-gitbook/Home">Home</a></li><li class=" item "><a href="/lf-wiki-gitbook/Import-System">Import System</a></li><li class=" item "><a href="/lf-wiki-gitbook/Legacy-Eclipse-Instructions">Legacy Eclipse Instructions</a></li><li class=" item "><a href="/lf-wiki-gitbook/Maven-Notes">Maven Notes</a></li><li class=" item "><a href="/lf-wiki-gitbook/Modal-Models-RFC">Modal Models RFC</a></li><li class=" item "><a href="/lf-wiki-gitbook/Multiports-and-Banks-of-Reactors">Multiports And Banks Of Reactors</a></li><li class=" item "><a href="/lf-wiki-gitbook/Overview">Overview</a></li><li class=" item "><a href="/lf-wiki-gitbook/Protobufs">Protobufs</a></li><li class=" item "><a href="/lf-wiki-gitbook/Publications-and-Presentations">Publications And Presentations</a></li><li class=" item "><a href="/lf-wiki-gitbook/Regression-Tests">Regression Tests</a></li><li class=" item "><a href="/lf-wiki-gitbook/Related-Work">Related Work</a></li><li class=" item "><a href="/lf-wiki-gitbook/Results-of-Experiments-for-Rhythm">Results Of Experiments For Rhythm</a></li><li class=" item "><a href="/lf-wiki-gitbook/Running-Benchmarks">Running Benchmarks</a></li><li class=" item "><a href="/lf-wiki-gitbook/Running-Lingua-Franca-IDE-(Epoch)-with-Kotlin-based-Code-Generators-Enabled-(without-Eclipse-Environment)">Running Lingua Franca IDE Epoch With Kotlin Based Code Generators Enabled Without Eclipse Environment</a></li><li class=" item "><a href="/lf-wiki-gitbook/Support-Matrix">Support Matrix</a></li><li class=" item "><a href="/lf-wiki-gitbook/Tardiness">Tardiness</a></li><li class=" item "><a href="/lf-wiki-gitbook/Target-Specification">Target Specification</a></li><li class=" item "><a href="/lf-wiki-gitbook/Termination">Termination</a></li><li class=" item "><a href="/lf-wiki-gitbook/Timing-Analysis">Timing Analysis</a></li><li class=" item "><a href="/lf-wiki-gitbook/Tools">Tools</a></li><li class=" item "><a href="/lf-wiki-gitbook/Troubleshooting">Troubleshooting</a></li><li class=" item "><a href="/lf-wiki-gitbook/Using-Maven">Using Maven</a></li><li class=" item "><a href="/lf-wiki-gitbook/Web-Based-Editor">Web Based Editor</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-Cpp">Writing Reactors In Cpp</a></li><li class=" item "><a href="/lf-wiki-gitbook/Writing-Reactors-in-Python">Writing Reactors In Python</a></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1sbq3r10"><hr/></li><style data-emotion="css k0rhaf">.css-k0rhaf{list-style:none;}.css-k0rhaf a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-k0rhaf a:hover{color:#1ed3c6!important;}.css-k0rhaf a svg{float:right;margin-right:1rem;}</style><li class="css-k0rhaf e1sbq3r12"><a href="https://hasura.io" to="https://hasura.io" target="_blank" rel="noopener noreferrer">Hasura<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside></div><div class="sidebarTitle sideBarShow"><a href='https://hasura.io/learn/'>graphql </a><div class='greenCircle'></div><a href='https://hasura.io/learn/graphql/react/introduction/'>react</a></div><style data-emotion="css 9bc759">.css-9bc759{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;padding-top:3rem;background:#fff;}.css-9bc759 table tr{background:#fff;}@media only screen and (max-width: 1023px){.css-9bc759{padding-left:0;margin:0 10px;padding-top:3rem;}}</style><main class="css-9bc759 e1eqkayb3"><style data-emotion="css rnnnrd">@media only screen and (max-width: 50rem){.css-rnnnrd{width:100%;position:relative;}}</style><div class="css-rnnnrd e1eqkayb2"><div class="titleWrapper"><style data-emotion="css 1gg19kx">.css-1gg19kx{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #1ed3c6;padding:0 16px;-webkit-flex:1;-ms-flex:1;flex:1;margin-top:0;padding-top:0;color:#000;}</style><h1 class="css-1gg19kx e1m7sxnn2">A Future Proof Package And Import System</h1><style data-emotion="css 1vkevom">.css-1vkevom{padding:1rem 1.5rem;text-align:right;}.css-1vkevom a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211, 220, 228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36, 42, 49);background-color:rgb(255, 255, 255);box-shadow:rgba(116, 129, 141, 0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-1vkevom a:hover{background-color:rgb(245, 247, 249);}</style><div class="mobileView css-1vkevom e1m7sxnn1"><a href="https://github.com/hasura/gatsby-gitbook-boilerplate/tree/master/content/A-future-proof-package-and-import-system.md" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit on GitHub</a></div></div><style data-emotion="css uipcji">.css-uipcji{max-width:750px;color:#3B454E;}.css-uipcji ul,.css-uipcji ol{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0px;padding:0px 0px 0px 2em;}.css-uipcji ul li,.css-uipcji ol li{font-size:16px;line-height:1.8;font-weight:400;}.css-uipcji a{-webkit-transition:color 0.15s;transition:color 0.15s;color:#1000EE;}.css-uipcji code{border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:0.9375em;background:#fff;}@media (max-width: 767px){.css-uipcji{padding:0 15px;}}</style><div class="css-uipcji e1m7sxnn0"><p class="paragraph">This is a collection of thoughts on the design of a reliable package and import system that is ready for future applications. At this stage, this page mostly represents my personal view (Christian Menard). I will also focus on the C++ target here as this is the target I know best. The C target is not a good example for these considerations as there is a fundamental design issue with the C target. Since the code generator places all code in a single generated <code>.c</code> file and does things like <code>#include reactor.c</code> to avoid the need for Makefiles, it circumvents many of the issues that come with imports that I will outline here. It simply ignores file scopes and namespaces altogether.</p><h1 class="heading1" id="thestatusquo">The status quo</h1><p class="paragraph">The current import system is lean and simple. Write <code>import Bar.lf</code> in <code>Foo.lf</code> and every reactor defined in <code>Bar.lf</code> will be visible in the file scope <code>Foo.lf</code>. <code>Bar.lf</code> is looked up simply by scanning the directory <code>Foo.lf</code> is placed in. This works well for the simple programs and tests we have right now, but does not scale. I identify the following problems:</p><ol><li><p class="paragraph">There is no notion of separate namespaces. Every reactor that <code>Bar.lf</code> defines becomes visible in <code>Foo.lf</code>. If both files define a Reactor <code>Foo</code>, there is a name clash and the import would be ill-formed. There should be a mechanism to distinguish the two definitions of <code>Foo</code>, such as using fully qualified names: <code>Foo.Foo</code> and <code>Bar.Foo</code>.</p></li><li><p class="paragraph">There is no concept for importing files from a directory structure. It is unclear how <code>Foo.lf</code> could import <code>my/lib/Bar.lf</code>.</p></li><li><p class="paragraph">There is no concept for packages or libraries that can be installed on the system. How could we import Reactors from a library that someone else provided?</p></li></ol><p class="paragraph">These are the more obvious issues that we have talked about. However, there are more subtle ones that we haven&#x27;t been discussed in depth (or at least not in the context of the import system design discussion). The open question is: What does importing a LF file actually mean? Obviously, an import should bring Reactors defined in another files into local scope. But what should happen with the other structures that are part of an LF file, namely target properties and preambles? That is not specified and our targets use a best practice approach. But this is far away from a good design that is scalable and future proof.</p><h2 class="heading2" id="aquickdiveintothec++codegenerator">A quick dive into the C++ code generator</h2><p class="paragraph">Before I discuss the problems with preambles and target properties, I would like to give you a quick overview of how the C++ code generator works. Consider the following LF program consisting of two files <code>Foo.lf</code> and <code>Bar.lf</code>:</p><style data-emotion="css fkgcw9">.css-fkgcw9{padding:16px;background:rgb(245, 247, 249);}</style><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Bar.lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">reaction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">startup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something bar like</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Foo.lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> bar </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">reaction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">startup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something foo like</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">Now let us have a look on what the C++ code generator does. It will produce a file structure like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token maybe-class-name">CMakeLists</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">txt</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">cc</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Bar</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">cc</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Foo</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">cc</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">We can ignore <code>CMakeLists.txt</code> and <code>main.cc</code> for our discussion here. The former specifies how the whole program can be build and the latter contains the <code>main()</code> function and some code that is required to get the application up and running. For each processed <code>&lt;file&gt;.lf</code> file, the code generator creates a directory <code>&lt;file&gt;</code>. For each reactor <code>&lt;reactor&gt;</code> defined in <code>&lt;file&gt;.lf</code>, it will create <code>&lt;file&gt;/&lt;reactor&gt;.cc</code> and <code>&lt;file&gt;/&lt;reactor&gt;.hh</code>. The header file declares a class representing the reactor like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Bar/Bar.hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"># pragma once</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;reactor-cpp/reactor-cpp.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reacor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// default actions</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">StartupAction</span><span class="token plain"> startup </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;startup&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">ShutdownAction</span><span class="token plain"> shutdown </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;shutdown&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">this</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// reaction bodies </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">r0_body</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">The corresponding <code>Bar/Bar.cc</code> will look something like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar/Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Bar</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token function" style="color:rgb(220, 220, 170)">r0_body</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something bar like</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">Similarly, <code>Foo.hh</code> and <code>Foo.cc</code> will be generated. However, since <code>Foo.lf</code> imports <code>Bar.lf</code> and instantiated the reactor <code>Bar</code> it must be made visible. This is done by an include directive in the generated code like so:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Foo/Foo.hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">### </span></div><div class="token-line"><span class="token plain"># pragma once</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;reactor-cpp/reactor-cpp.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar/Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reacor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// default actions</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">StartupAction</span><span class="token plain"> startup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">ShutdownAction</span><span class="token plain"> shutdown</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// reactor instances</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Bar</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// reaction bodies </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">r0_body</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><h2 class="heading2" id="theproblemwithpreambles">The problem with preambles</h2><p class="paragraph">The problems with preamble in the context of imports were already discussed in a <a href="https://github.com/pulls" target="_blank" rel="noopener noreferrer">related issue</a>, but I would like to summarize the problem here. While the examples above worked nicely even with imports, things get messy as soon as we introduce a preamble. Let&#x27;s try this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Bar.lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> preamble </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   struct bar_t </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     int x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     std</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">string y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">   bar_t bar_func </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">bar_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> output out</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">bar_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">reaction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">startup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> out </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">set</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">bar_fuc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Foo.lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"> bar </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">reaction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">bar</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token parameter">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   auto</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">get</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   std</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Received {&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">x </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;, &quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">y </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;}\n&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">This would be expected to print <code>Received {32, hello}</code>. However, before we can even compile this program, we need to talk about what should happen with the preamble during code generation and how the import affects it. So where should the preamble go? The first thing that comes to mind, is to embed it in the header file <code>Bar.hh</code> something like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Bar/Bar.hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"># pragma once</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;reactor-cpp/reactor-cpp.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// preamble</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">struct bar_t </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  int x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  std</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">string y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">bar_t bar_func </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">bar_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reacor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">/* ... */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">If we embed the preamble like this and compile the program ,then the compiler is actually happy and processes all <code>*.cc</code> files without any complaints. <strong>But</strong>, there is a huge problem while linking the binary. The linker sees multiple definitions of <code>bar_func</code> and has no idea which one to use. Why is that? Well, the definition of <code>bar_func</code> is contained in a header file. This should never be done in C/C++! Since includes translate to a plain-text replacement by the preprocessor, <code>Bar.cc</code> will contain the full definition of <code>bar_func</code>. As <code>Foo.cc</code> imports <code>Foo.hh</code> which imports <code>Bar.hh</code>, also Foo.cc will contain the full definition. And since <code>main.cc</code> also has to include <code>Foo.hh</code>, <code>main.cc</code> will also contain the full definition of <code>bar_func</code>. So we have multiple definitions of the same function and the linker rightfully reports this as an error.</p><p class="paragraph">So what should we do? We could place the preamble in <code>Bar.cc</code> instead. This ensures that only <code>Bar.cc</code> sees the definition of <code>bar_func</code>. But then the compiler complains. Neither <code>Bar.hh</code> nor <code>Foo.hh</code> see type declaration of <code>bar_t</code>. Note that there is a dependency of <code>Foo.lf</code> on the preamble in <code>Bar.lf</code>. The import system should somehow take care of this dependency! Also note that this has not appeared as a problem in C as the code generator places everything in the same compilation unit. <code>Foo</code> will see the preamble of <code>Bar</code> as long as <code>Foo</code> is generated before <code>Bar</code>.</p><p class="paragraph">But how to solve it for C++ where the code is split in multiple compilation units (which really should be happening in C as well)? What we do at the moment is annotating the preamble with <code>private</code> and <code>public</code> keywords. This helps to split the preamble up and decide what to place in the header and what to place in the source file. For instance:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Bar.lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> preamble </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   struct bar_t </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     int x</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     std</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">string y</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">private</span><span class="token plain"> preamble </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   bar_t bar_func </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">bar_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">42</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> output out</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain">bar_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">reaction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">startup</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> out </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">   out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">set</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">bar_fuc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">This makes the type <code>bar_t</code> visible as part of the public interface of <code>Bar</code>. Both the code generated for <code>Bar</code> and the code generated for <code>Foo</code> will see the definition of <code>bar_t</code>. This is realized by placing the public preamble in <code>Bar.hh</code> The function <code>bar_func</code> is part of <code>Bar</code>&#x27;s private interface. It is only visible with the reactor definition of <code>Bar</code> and is not propagated by an import. This is realized by simply placing the private preamble in <code>Bar.cc</code>. This makes the compiler finally happy and when get an executable program private and public preambles provide a mechanism to define what is propagated on an import and what is not. I think this is an important distinction even in languages other than C/C++ that do not have this weird separation of source and header file.</p><p class="paragraph">I am sorry for this lengthy diversion into things that happened in the past where we actually want to talk about how things should work in the future. However, understanding this issue is important and when talking about other solutions we should not forget that it exists.</p><h2 class="heading2" id="theproblemwithtargetproperties">The problem with target properties</h2><p class="paragraph">It is also not well-defined what should happen with target properties when importing a <code>.lf</code> file. Apparently the common practice is simply ignoring the existence of other target declarations and only considering the target declaration of the <code>.lf</code> that contains the main reactor. I think this works reasonably well for our small programs. But it will cause problems when either programs become larger or we introduce new target properties where it is unclear what piece of code they reference. Let us have a look at the <a href="https://github.com/icyphy/lingua-franca/wiki/Writing-Reactors-in-Cpp#the-c-target-specification" target="_blank" rel="noopener noreferrer">existing target properties for C++</a>. How should those different properites be handled on an import? Which scope do they actually apply to? We haven&#x27;t really talked about this.</p><p class="paragraph"><code>fast</code>, <code>keepalive</code>, <code>threads</code> and <code>timeout</code> are easy. They apply to the main reactor. Since we do not import main reactors from other files, it is clear that we really want to use the properties defined in the main compilation unit. So our current strategy works in this case. Although there are still some subtelties. For instance, if a library file defines <code>keepalive=true</code> and <code>fast=false</code> because it uses physical actions, should any file importing this library file be allowed to override these properties. Probably not, because it doesn&#x27;t make sense if physical actions are involved. But a careless user of the library might not be aware of that. So maybe it isn&#x27;t that clear after all.</p><p class="paragraph"><code>build-type</code>, <code>cmake-include</code>, <code>compile</code>, <code>logging</code> and <code>no-runtime-validation</code> influence how the application is build. They are used for generating the <code>CMakeLists.txt</code> file. So their is quite clear: they apply to the whole compilation of the given application. Again it is a simple solution to only consider the target properties of the file containing the main reactor since this can be considered the file that &#x27;drives&#x27; the compilation. But what if an imported <code>.lf</code> relies on an external library and uses the <code>cmake-include</code> property to tell cmake to look this library up, make the library header files visible and link our generated code to that library (fortunately this can be done with 2 lines in cmake). Should this target property really be ignored by our import? Probably not, because it will lead to compile errors if the authot of the main <code>.lf</code> file does not configure <code>cmake-include</code> properly. So there should be some kind of merging mechanism for <code>cmake-include</code>. Should this be done for the other properties as well? I am not sure and I actually don&#x27;t know how the merging would work.</p><p class="paragraph">So this raises a lot of questions that we currently have no answer to. I believe we need to find answers for these questions in order to create a well working import and package system. This gets only more complicated when we add more properties such as the proposed <code>files</code> directive. We should really consider what properties actually apply to and if they influence the way imports work.</p><h3 class="heading3" id="theworkinprogress">The work in progress</h3><p class="paragraph">To be continued... I want to describe here what is happening on the <code>new_import</code> and the (potential) problems this brings.</p><h3 class="heading3" id="possiblesolutions">Possible solutions</h3><p class="paragraph">To be continued... I would like to show a few possible soltions that have come to mind and that we discussed already.</p><h2 class="heading2" id="concreteproposal">Concrete proposal</h2><p class="paragraph">With the risk of overlooking some of the issues discussed above, I&#x27;d like to outline a concrete proposal. To me, at least, it is easier to reason about these issues in a context with a few more constraints. Hopefully, this can serve as a starting point that we can tweak/adjust as needed. Note: this proposal borrows from the previous proposal written by Soroush. Based on my experience with Xtext, I have confidence that what is described below is feasible to implement.</p><h3 class="heading3" id="import/export">Import/export</h3><ol><li>One LF file can contain multiple reactor definitions.</li><li>There can be at most one main reactor per file.</li><li>Any reactor class defined outside of the current file has to be imported explicitly.</li><li>The visibility of a reactor class can be limited using a modifier in the class definition.</li></ol><ul><li><em>Should the default visibility be public or private? I have no strong preference either way.</em></li></ul><ol start="5"><li>An <code>import</code> statement <strong>must</strong> specify which reactor classes to import. This is necessary because if we populate a global scope using the <code>uriImport</code> mechanism, the local scope provider needs to know which definition to link to if there happen to exist multiple among the set of included files. We could <em>potentially</em> relax this constraint and only report the situation where we know for a fact that there is ambiguity and needs to be resolved by making the imports explicit. We could also deprecate the use of unqualified imports (the original syntax), therefore allow it but warn that it might not work as expected.</li><li>An LF file in an <code>import</code> statement is specified by a path relative to the directory of the file in which the <code>import</code> statement occurs or relative to a series of directories in a wider search path.</li></ol><ul><li><em>Eclipse uses <code>.project</code> files to identify the root of a project; we can look for that.</em></li><li><em>We can look for our own kind of manifest files as well. These can list additional locations to search. This is compatible with the idea of developing a package system. I personally like this approach better than using an environment variable.</em></li></ul><ol start="7"><li>I personally find fully qualified names excess generality and have never felt compelled to use them in Java. IMO, they lead to code that&#x27;s difficult to read and a pain to format. To keep things simple, I suggest we don&#x27;t support them. Instead, we should provide a mechanism for renaming imported reactor classes to avoid naming conflicts.</li><li><em>Open question: do we want scope modifiers for imports? It seems that extra import statements could be used to increase visibility, so it might not be needed.</em></li></ol><h3 class="heading3" id="syntax">Syntax</h3><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token maybe-class-name">Import</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;import&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token constant" style="color:rgb(100, 102, 149)">ID</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token maybe-class-name">Rename</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;,&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token constant" style="color:rgb(100, 102, 149)">ID</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token maybe-class-name">Rename</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">?</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;from&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token constant" style="color:rgb(100, 102, 149)">PATH</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Rename</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;as&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token constant" style="color:rgb(100, 102, 149)">ID</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph"><em>Note: This syntax could be extended to support packages in addition to paths. But it doesn&#x27;t make much sense to have this until we have a package manager and package registry.</em></p><p class="paragraph"><em>Current state of the discussion: one unifying syntax vs. different syntax for references to files and packages.</em></p><h2 class="heading2" id="preambles">Preambles</h2><p class="paragraph">A preamble allows for the inclusion of verbatim target code that may be necessary for reactors to function. Currently, there are two scopes in which preambles can appear: (1) file scope and (2) reactor class scope. Moreover, there exist visibility modifiers to label preambles <code>private</code> or <code>public</code>. A <code>public</code> preamble is intended to contain code that is necessary for the use of a reactor that is in scope. A <code>private</code> preamble is intended to contain code that is necessary for the implementation of a reactor that is in scope. Only the Cpp code generator can currently effectively separate these LF scope levels. It achieves this by putting each reactor class definition in its own file. LF file scope preambles are currently not supported by the C target, but this appears to be unintentional and would be easy to fix. Reactor class scope preambles are supported by the C target, but there is no isolation of scope; the preamble of one reactor is visible to the one defined after it. To fix this, I see two options: (1) follow the same approach as <code>CppGenerator</code> and output separate files, which also means that a Makefile has to be generated in order to compile the result, or (2) leverage block scope within a single file, but this will become complicated and make the generated C code even less humanly readable.</p><p class="paragraph"><em>We could put aside the problem of name clashes due to the absence of scope isolation in generated C code and fix this later. For the time being, the problem can be circumvented using <code>.h</code> files.</em></p><h2 class="heading2" id="targetproperties">Target Properties</h2><ol><li>Each file declares a target.</li><li>All code in all reactors in the same file must agree with the specified target.</li><li>Additional target properties may be specified.</li><li>Target properties are not inherited through imports.</li><li>Any property that needs to be inherited through an import (such as the requirement to link against the pthread library) must be specified as a build dependency instead.</li></ol><h2 class="heading2" id="builddependencies">Build Dependencies</h2><ol><li>It must be possible to specify build dependencies, such as <code>files</code>, <code>sources</code>, and <code>protobufs</code>.</li><li>We could either allow these definitions to go directly in the <code>.lf</code> file, or we could decide to specify them in a package description (i.e., separate file). We could potentially allow both.</li><li>Build dependencies are inherited through imports (or from package descriptions), and they are never shadowed, always <em>joined</em>.</li></ol><h1 class="heading1" id="uniquereactornames">Unique Reactor Names</h1><p class="paragraph">The new import system as described above ensures that reactor names within a single <code>.lf</code> file are unique. In case reactors with the same name are imported from different <code>.lf</code> files, the renaming mechanism needs to be used in order to resolve the name conflict. The same applies if the given <code>.lf</code> file defines some reactors and tries to import other reactors with the same name. For instance, consider the LF file in Example 1 below. In the scope of this file, three reactor declarations are visible: <code>Foo</code>, <code>Bar</code> and <code>Baz</code>, although the actual reactors have the same name <code>Foo</code>.</p><h2 class="heading2" id="examples">Examples</h2><p class="paragraph">Throughout this section, I will be using two LF example programs. Since the markdown syntax does not provide a simple way to label and refer to code listings, I figure its easiest to place them here in a central place and refer to them later by the heading</p><h3 class="heading3" id="example1">Example 1</h3><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.lf&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> </span><span class="token maybe-class-name">Baz</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.lf&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  \\ </span><span class="token spread operator" style="color:rgb(212, 212, 212)">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><h3 class="heading3" id="example2">Example 2</h3><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Baz</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  \\ </span><span class="token spread operator" style="color:rgb(212, 212, 212)">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Foo</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.lf&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  foo </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  \\ </span><span class="token spread operator" style="color:rgb(212, 212, 212)">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Bar</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.lf&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">main reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  bar </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  \\ </span><span class="token spread operator" style="color:rgb(212, 212, 212)">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><h2 class="heading2" id="uniquereactornamesintargetcode">Unique Reactor Names in Target Code</h2><p class="paragraph">While the mechanism above effectively ensures uniqueness in a single LF file, this uniqueness is surprisingly hard to ensure in generated target code. C has an obvious problem here as it places all generated code in a single file. While the name conflict in the above code can be solved by generating code for three reactors named <code>Bar</code>, <code>Baz</code> and <code>Foo</code>, it breaks as soon as another file of the same LF program uses <code>import Foo from &quot;Bar.lf&quot;</code>. Then there would be two definitions of the reactor <code>Foo</code> that cannot be resolved.</p><p class="paragraph">Now you would probably expect that splitting the generated code into multiple files solves the issue, but unfortunately this is not true. If anything, it makes the problem more subtle. The C++ code generated from Example 1  would likely look something like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Foo.hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// do the renaming</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Baz</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">This will cause a compile error as there are multiple definitions of <code>Foo</code>. While renaming is possible in C++ with the <code>using</code> keyword (<code>typedef</code> works as well), the thing being renamed needs to be already visible in the scope. So there are multiple definitions of <code>Foo</code> as all the files <code>Bar.hh</code>, <code>Baz.hh</code> and <code>Foo.hh</code> define this class. We need a mechanism to distinguish the different definitions of <code>Foo</code>.</p><p class="paragraph">There is even another issue that stems from the fact that the semantics of imports in LF are different from the include semantics of C++. Consider the code in Example 2, which is valid LF code. Although <code>Bar.lf</code> imports <code>Foo</code> and <code>Foo.lf</code> imports from <code>Bar.lf</code>, the definition of <code>Foo</code> in <code>Baz.lf</code> is not visible in <code>Foo.lf</code>. This &#x27;hiding&#x27;, however, does not easily propagate to the generated code. In C, there will be an error because both definitions of <code>Foo</code> are placed in the same file. In C++, the different definitions of <code>Foo</code> are placed in different files, but there will still be an error. The generated C++ code would look something like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Baz</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Foo</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Bar</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">This will produce an error due to multiple definitions of <code>Foo</code> being visible in <code>Foo.hh</code>. The problem is that any include in <code>Bar.hh</code> becomes also visible in <code>Foo.hh</code>. So there is a name clash due to the way the C++ compiler processes included and that is hard to work around.</p><h2 class="heading2" id="possiblesolutions">Possible Solutions</h2><p class="paragraph">In conclusion from the above section, I can say that translating the file based scoping of reactor names that we have in LF to generated target code is not trivial. Any sensible solution will need to establish a mechanism to ensure that any two distinct reactors in LF are also distinct in target code.</p><h3 class="heading3" id="namespaces">Namespaces</h3><p class="paragraph">We could introduce some form of a namespace mechanism that allows us to derive fully-qualified names of reactors. This is the preferred solution for me (Christian). Note that by &#x27;namespace&#x27; I mean any logical organization of reactors in named groups and not the precise concept of C++ namespaces. In other languages those logical groups are also referred to as modules or packages. Also note that it is only important to be able to assign a fully-qualified name to a reactor, it does not necessarily require that we refer to reactors by their fully-qualified name in LF code.</p><h4 class="heading4" id="filebasednamespaces">File based namespaces</h4><p class="paragraph">In my view, the easiest way to introduce namespaces in LF would be to leverage file system structure. Everything contained in <code>Foo.lf</code> would automatically be in the namespace <code>Foo</code>. So the FQN of a reactor <code>Foo</code> defined in <code>Foo.lf</code> would be <code>Foo.Foo</code> (or <code>Foo::Foo</code>, or some other delimiter). This would solve the name clashes in both of our examples. For Example 1, the generated code could look like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token comment" style="color:rgb(106, 153, 85)">// Foo.hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">namespace </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// do the renaming</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Bar</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Baz</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Baz</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">For Example 2, the generated code could look like this:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Baz</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">namespace </span><span class="token maybe-class-name">Baz</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Baz.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">namespace </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Baz</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// bring Foo in scope</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Foo</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">\\ </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">#include </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">cpp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">hh</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">#include </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Bar.hh&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">namespace </span><span class="token maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">using </span><span class="token maybe-class-name">Bar</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Bar</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// bring Bar in scope</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Foo</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> reactor</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">:</span><span class="token maybe-class-name">Reactor</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">Bar</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">While this appears to be a promising solution, it is not sufficient to only consider the name of an <code>*.lf</code> file to derive the namespace
There could be two files <code>Foo.lf</code> in different directories that both define the reactor <code>Foo</code>. Thus, we also need to consider the directory structure and introduce hierarchical namespaces. Consider this directory tree:</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">foo</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  bar</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain">  # defines reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  baz</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    foo</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">lf</span><span class="token plain">  # defines reactor </span><span class="token maybe-class-name">Foo</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">In this example, the two <code>Foo</code> reactors would have the fully qualified names <code>foo.bar.foo.Foo</code> and <code>foo.baz.foo.Foo</code>.
In order for this concept to work, we need the notion of a top-level namespace or directory. Naturally, this would be the package. Therefore, this namespace approach would also require a simple mechanism to define a package. For now this could be rudimentary. Simply placing an empty <code>lf.yaml</code> in the <code>foo/</code> directory in the above example would be sufficient. In addition to the notion of packages, we would also need a simple mechanism to find packages. However, since packages are something we want to have anyway, it would not hurt to start and implement a rudimentary system now.</p><p class="paragraph">This proposal is a bit at odds with the file based import mechanism described above. While it is clear what the namespace of an <code>*.lf</code> file relative to a package directory is, it is unclear what the namespace of an arbitrary file outside a package is. Marten suggested to resolve this by using a default namespace or the global namespace whenever a *lf that is not part of a package is imported and to make the user responsible for avoiding any conflicts.</p><p class="paragraph">We would also need to restrict the naming of files and directories and ban the usage of the namespace deliminator (<code>.</code> or <code>::</code> or some other) in file and directory names. In my opinion this is not much of a problem and common practice for many languages. If we decide to use this namespace mechanism, it would probably be better to drop the file based imports and switch to imports by FQN (e.g. <code>import Foo from foo.bar.foo</code>)</p><h4 class="heading4" id="anamespacedirective">A Namespace Directive</h4><p class="paragraph">As an alternative to the file based namespace mechanism described above, we could also introduce a namespace directive in the LF syntax or as part of the target properties. This would effectively allow the user to specify the namespace that any reactor defined in a file should be part of. This solution would allow to augment the file based import system that we have with a namespace mechanism. It is important to note, however, that this entirely shifts the responsibility for ensuring uniqueness within a namespace to the user. When we derive namespaces from the file path as described above, we can be sure that the resulting namespace only contains unique reactors because we ensure that any LF file only contains unique reactors. If we allow the user to specify the namespace, however, there could easily be two files with the same namespace directive that both define the reactor <code>Foo</code>. This approach might also cause problems for target langauages where the namespaces relate tp conrete file paths such as in Rust, Python or Java.</p><h3 class="heading3" id="namemangling">Name Mangling</h3><p class="paragraph">There are other mechanisms to derive unique names apart from namespaces. One that is widely used by compilers is name mangling which replaces or decorates the original name. For instance, we could simply add a number to the name of generated reactors (<code>Foo1</code>, <code>Foo2</code>, ...) to distinguish multiple LF reactor definitions named <code>Foo</code>. What seperates our approach from traditional compiler though, is that we are not in control of the full build process and only generate source code to be processed by another compiler. Therefore, any renaming we do when compiling LF code to target code needs to be done with care as it could easily introduce new problems because we are not aware of all the identifiers defined in a target language. For instance if our LF program uses a library that defines the class <code>Foo3</code>, adding a third definition of the reactor Foo to the prorgram would lead to an unexpected error that is also hard to debug.</p><p class="paragraph">Soroush also proposed to use a hashing mechanism (for instance a hash of the file name) to decorate reactor names. This would be less likely
to clash with any names defined in some library. However, we would need to make sure that any mechansim we use for generating unique decorated names follows strict rulses and generates reproducable names. This reproducibility is crucial for several reasons. </p><ol><li><p class="paragraph">Since even a complex name mangling mechanism has still the chance to produce name clashes with identifiers defined outside of the LF program, those clashes should not occur randomly. There should be either an error or no error on each compilation run. Nondeterministic builds are no fun to deal with.</p></li><li><p class="paragraph">In case of any errors, it is crucial to be able to reproduce and compare builds across machines and platforms. A platform dependent name mangling algorithm (for instance one that hashes file paths) would make it unecessary hard to reproduce and debug compile errors.</p></li><li><p class="paragraph">Somewhere in the future, we might want to be able to compile packages as libraries. Recompilation of the library should never change its API. Moreover, the name mangling algorithm should be robust in the sense that small changes in LF code do not lead to changed identifiers
in the library API.</p></li></ol><p class="paragraph">All in all, I think it is hard to define an algorith that generates reproducible and stable names, but maybe someone else has a good idea of how this could be achieved. </p><p class="paragraph">Another obvious disadvantage of the name mangling approach would be that the generated code is less readable. Also any external target code that might want to reference reactors in a library compiled from LF code, would need to know and use the mangled name.</p><h2 class="heading2" id="uniquereactornamesinourtools">Unique Reactor Names in our Tools</h2><p class="paragraph">In our last meeting (Tue 2020-08-04), I said that there are other places where we care about unique names: our tools such as the diagram view or the trace generator that I implemented for C++ and that we cannot ensure that names are unique at the moment. However, while thinking about it a bit more I realized that this is not much of an issue. Ambiguous names of reactor types are not a big problem for the diagram view. Since clicking on the nodes jumps directly to the reactor definition, the ambiguity in the names can easily be resolved.</p><p class="paragraph">For the tracing, I realized that it is not the name of the reactor type that matters, but the name of the instance. These are unique fully-qualified names already. For instance <code>main.foo.bar.r0</code>, denotes the reaction with priority 0, of a reactor instance called <code>bar</code> that is contained by the reactor instance <code>foo</code>, which is in turn contained by the main reactor.</p><h2 class="heading2" id="summary">Summary</h2><p class="paragraph">All in all, I think leveraging the file strucuture for determining the fully qualified names of reactors is the most promising solution.</p><ol><li>It works without any changes in our syntax. Only the code generators need to be updated to support the namespacing.</li><li>In contrast to name mangling, it allows generation of readable code and also gives the programmer full control of how generated reactors are named.</li><li>It fits naturally to languages that also support leveraging the file structure to create namespaces (e.g. python or rust).</li></ol></div><div class="addPaddTopBottom"><style data-emotion="css vqr4ny">.css-vqr4ny{margin:0px;padding:0px;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px);}.css-vqr4ny .previousBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230, 236, 241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116, 129, 141, 0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-vqr4ny .nextBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230, 236, 241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116, 129, 141, 0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-vqr4ny .nextBtn:hover,.css-vqr4ny .previousBtn:hover{-webkit-text-decoration:none;text-decoration:none;border:1px solid #1ed3c6;}.css-vqr4ny .nextBtn:hover .rightArrow,.css-vqr4ny .previousBtn:hover .leftArrow{color:#1ed3c6;}.css-vqr4ny .leftArrow{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0px;color:rgb(157, 170, 182);-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-right:16px;}.css-vqr4ny .rightArrow{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-left:16px;margin:0px;color:rgb(157, 170, 182);}.css-vqr4ny .nextPreviousTitle{display:block;margin:0px;padding:0px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;}.css-vqr4ny .nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500;}@media (max-width: 767px){.css-vqr4ny{display:block;padding:0 15px;}.css-vqr4ny .previousBtn{margin-bottom:20px;}}</style><div class="css-vqr4ny ex6i9xe0"><a class="nextBtn" href="/lf-wiki-gitbook/Benchmarks"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>Benchmarks</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><style data-emotion="css nrfftn">.css-nrfftn{width:224px;}</style><div class="hiddenMobile css-nrfftn e1eqkayb0"><style data-emotion="css 1b5er25">.css-1b5er25{width:100%;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:24px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;background:#fff;}.css-1b5er25 .rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);color:#3B454E;}.css-1b5er25 .rightSideBarUL{margin-top:32px;}.css-1b5er25 .rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);}.css-1b5er25 .rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;color:#3B454E;}@media only screen and (max-width: 50rem){.css-1b5er25{width:100%;position:relative;}}</style><aside class="css-1b5er25 e1y52jk21"><ul class="rightSideBarUL"><li class="rightSideTitle">CONTENTS</li><style data-emotion="css g0grba">.css-g0grba{list-style:none;}.css-g0grba a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-g0grba a:hover{color:#1ed3c6!important;}.css-g0grba a svg{float:right;margin-right:1rem;}</style><li class="css-g0grba e1y52jk20"><a href="#thestatusquo" to="#thestatusquo">The status quo</a></li><li class="css-g0grba e1y52jk20"><a href="#uniquereactornames" to="#uniquereactornames">Unique Reactor Names</a></li></ul></aside></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/A-future-proof-package-and-import-system";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4c5991a8599d38b13eff.js"],"app":["/app-1e29a839ef62b468a227.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/lf-wiki-gitbook/polyfill-4c5991a8599d38b13eff.js" nomodule=""></script><script src="/lf-wiki-gitbook/app-1e29a839ef62b468a227.js" async=""></script><script src="/lf-wiki-gitbook/framework-bb601ffbbd122d5c0b0b.js" async=""></script><script src="/lf-wiki-gitbook/webpack-runtime-c3d61c4484cdb79c688f.js" async=""></script><script defer="">
            function navBarClose() {
              document.getElementById("navbar").classList.toggle("responsive");
            }
            document.addEventListener('click',function(e){
              if(e.target && e.target.tagName.toLowerCase() === 'a'){
                navBarClose();
              }
           });
            </script></body></html>